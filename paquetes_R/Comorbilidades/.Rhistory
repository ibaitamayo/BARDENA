Disease_codification = "codtype",
Disease_date = "date",
Disease_group = "pat",
Drug_code = "codATC",
Drug_date = "Atenea_start",
Custom_disease_def = codigos_enf_cand_1,
Custom_drug_def = farmacos_cand_1)
load("~/GitHub/BARDENA/paquetes_R/Comorbilidades/tablas_prueba_morbfindr.rda")
load("~/Github/BARDENA/paquetes_R/Comorbilidades/R/sysdata.rda")
View(tricod)
View(tricod)
View(tricod)
unlist(tricod)
load("~/Github/BARDENA/paquetes_R/Comorbilidades/tablas_prueba_morbfindr.rda")
load("~/Github/BARDENA/paquetes_R/Comorbilidades/codigos.rda")
View(lista11)
lista11
lista11->charlson_tabla
charlson_tabla %>% filter((enfermedad=="chf"&codigo=="K76")=FALSE)
charlson_tabla %>% filter((enfermedad=="chf"&codigo=="K76")==FALSE)
library(dplyr)
charlson_tabla %>% filter((enfermedad=="chf"&codigo=="K76")==FALSE)
View(charlson_tabla %>% filter((enfermedad=="chf"&codigo=="K76")==FALSE))
View(charlson_tabla )
View(charlson_tabla %>% filter((enfermedad=="chf"&codigo=="_K76")==FALSE))
table(charlson_tabla$enfermedad)
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
transmute(case_when(enfermedad=="ami"~"myocardial infarction"))
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
transmute(case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure"))
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
mutate(enfermedad2=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diab"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"))
table(charlson_tabla$enfermedad)
names(table(charlson_tabla$enfermedad))
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
mutate(enfermedad=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"))->charlson_gorricho
charlson_gorricho
View(charlson_gorricho)
gsub(x = "^_J24", pattern="\^",replacement="")
gsub(x = "^_J24", pattern="\\^",replacement="")
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
mutate(enfermedad=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
codigo=gsub(codigo,pattern="\\^",replacement=""))) %>% filter(!is.na(enfermedad))->charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
mutate(enfermedad=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
codigo=gsub(codigo,pattern="\\^",replacement="")) %>% filter(!is.na(enfermedad))->charlson_gorricho
View(pattern="\\^",replacement=""))
VIew(charlson_gorricho)
View(charlson_gorricho)
cod_type=ifelse(grep(pattern="^\\_",codigo),"CIAP2","nada") %>%
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(grep(pattern="^\\_",codigo),"CIAP2","nada")) %>%
filter(!is.na(enfermedad)) ->charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(grep(pattern="^\\_",x=codigo),"CIAP2","nada")) %>%
filter(!is.na(enfermedad)) ->charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(regexec(pattern="^\\_",x=codigo),"CIAP2","nada")) %>%
filter(!is.na(enfermedad)) ->charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "^\\_",x=codigo),"CIAP2","nada")) %>%
filter(!is.na(enfermedad)) ->charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "^\\_",x=codigo),"CIAP2","nada")) %>%
filter(!is.na(enfermedad)) ->charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "^\\_",x=codigo),"CIAP2","nada"))->charlson_gorricho
charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "^\_",x=codigo),"CIAP2","nada"))->charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "^_",x=codigo),"CIAP2","nada"))->charlson_gorricho
charlson_gorricho
startsWith(x = "_K92",prefix = "\\_")
startsWith(x = "_K92",prefix = "\_")
startsWith(x = "_K92",prefix = "_")
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="canc"~"cancer (any malignancy)",
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "_",x=codigo),"CIAP2",
ifelse(startsWith(prefix = "[0-9]",x=codigo),"CIE9","CIE10")))->charlson_gorricho
charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "_",x=codigo),"CIAP2",
ifelse(startsWith(prefix = "[0:9]",x=codigo),"CIE9","CIE10")))->charlson_gorricho
charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "_",x=codigo),"CIAP2",
ifelse(startsWith(prefix = "[:digit:]",x=codigo),"CIE9","CIE10")))->charlson_gorricho
charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "_",x=codigo),"CIAP2",
ifelse(startsWith(prefix = "[::digit::]",x=codigo),"CIE9","CIE10")))->charlson_gorricho
charlson_gorricho
charlson_tabla %>%
filter((enfermedad=="chf"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="pvd"&codigo=="_K99")==FALSE) %>%
filter((enfermedad=="hp"&codigo=="_K76")==FALSE) %>%
filter((enfermedad=="rend"&codigo=="_K87")==FALSE) %>%
transmute(charlson=case_when(enfermedad=="ami"~"myocardial infarction",
enfermedad=="chf"~"congestive heart failure",
enfermedad=="pvd"~"peripheral vascular disease",
enfermedad=="cevd"~"cerebrovascular disease",
enfermedad=="dementia"~"dementia",
enfermedad=="cpd"~"chronic pulmonary disease",
enfermedad=="rheumd_ch"~"rheumatoid disease",
enfermedad=="pud_ch"~"peptic ulcer disease",
enfermedad=="mld"~"mild liver disease",
enfermedad=="diabwoc"~"diabetes without complications",
enfermedad=="diabwc"~"diabetes with complications",
enfermedad=="hp"~"hemiplegia or paraplegia",
enfermedad=="rend"~"renal disease",
enfermedad=="canc"~"cancer (any malignancy)",
enfermedad=="msld"~"moderate or severe liver disease",
enfermedad=="metacanc"~"metastatic solid tumour",
enfermedad=="aids"~"AIDS/HIV"),
cod=gsub(codigo,pattern="\\^",replacement=""),
cod_type=ifelse(startsWith(prefix = "_",x=codigo),"CIAP2",
ifelse(startsWith(prefix = "[[:digit:]]",x=codigo),"CIE9","CIE10")))->charlson_gorricho
charlson_gorricho
startsWith(prefix = "[[:digit:]]",x="9892")
startsWith(prefix = "9",x="9892")
startsWith(prefix = "[0-9]",x="9892")
startsWith(prefix = "[0:9]",x="9892")
startsWith(prefix = "[[:digit:]]",x="9892")
startsWith(prefix = "[0-9]",x="9892")
startsWith(prefix = "[0-9]+",x="9892")
startsWith(prefix = "[0123456789]",x="9892")
startsWith(prefix = "(0|1|2|3|4|5|6|7|8|9)",x="9892")
startsWith(prefix = "[0|1|2|3|4|5|6|7|8|9]",x="9892")
startsWith(prefix = "[0|1|2|3|4|5|6|7|8|9]",x="9")
startsWith(prefix = "[0|1|2|3|4|5|6|7|8|9]",x="a")
startsWith(prefix = "[a|1|2|3|4|5|6|7|8|9]",x="a")
startsWith(prefix = "(a|1|2|3|4|5|6|7|8|9)",x="a")
startsWith(prefix = "(a|1|2|3|4|5|6|7|8|9)","989")
